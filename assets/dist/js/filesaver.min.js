var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(w){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var A=w.document,n=w.URL||w.webkitURL||w,S=A.createElementNS("http://www.w3.org/1999/xhtml","a"),p=!w.externalHost&&"download"in S,E=w.webkitRequestFileSystem,y=w.requestFileSystem||E||w.mozRequestFileSystem,a=function(e){(w.setImmediate||w.setTimeout)(function(){throw e},0)},m="application/octet-stream",O=0,h=[],e=function(){for(var e=h.length;e--;){var t=h[e];"string"==typeof t?n.revokeObjectURL(t):t.remove()}h.length=0},N=function(e,t,n){for(var o=(t=[].concat(t)).length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){a(e)}}},o=function(o,n){var e,r,t,a=this,i=o.type,d=!1,s=function(){var e=(w.URL||w.webkitURL||w).createObjectURL(o);return h.push(e),e},u=function(){N(a,"writestart progress write writeend".split(" "))},c=function(){if(!d&&e||(e=s()),!r){if(navigator.userAgent.match(/7\.[\d\s\.]+Safari/)&&void 0!==window.FileReader&&o.size<=157286400){var t=new window.FileReader;return t.readAsDataURL(o),t.onloadend=function(){var e=A.createElement("iframe");e.src=t.result,e.style.display="none",A.body.appendChild(e),u()},a.readyState=a.DONE,void(a.savedAs=a.SAVEDASUNKNOWN)}return window.open(e,"_blank"),a.readyState=a.DONE,a.savedAs=a.SAVEDASBLOB,void u()}r.location.href=e},f=function(e){return function(){if(a.readyState!==a.DONE)return e.apply(this,arguments)}},l={create:!0,exclusive:!1};if(a.readyState=a.INIT,n||(n="download"),p){e=s(),A=w.document,(S=A.createElementNS("http://www.w3.org/1999/xhtml","a")).href=e,S.download=n;var v=A.createEvent("MouseEvents");return v.initMouseEvent("click",!0,!1,w,0,0,0,0,0,!1,!1,!1,!1,0,null),S.dispatchEvent(v),a.readyState=a.DONE,a.savedAs=a.SAVEDASBLOB,void u()}w.chrome&&i&&i!==m&&(t=o.slice||o.webkitSlice,o=t.call(o,0,o.size,m),d=!0),E&&"download"!==n&&(n+=".download"),(i===m||E)&&(r=w),y?(O+=o.size,y(w.TEMPORARY,O,f(function(e){e.root.getDirectory("saved",l,f(function(e){var t=function(){e.getFile(n,l,f(function(n){n.createWriter(f(function(t){t.onwriteend=function(e){r.location.href=n.toURL(),h.push(n),a.readyState=a.DONE,a.savedAs=a.SAVEDASBLOB,N(a,"writeend",e)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&c()},"writestart progress write abort".split(" ").forEach(function(e){t["on"+e]=a["on"+e]}),t.write(o),a.abort=function(){t.abort(),a.readyState=a.DONE,a.savedAs=a.FAILED},a.readyState=a.WRITING}),c)}),c)};e.getFile(n,{create:!1},f(function(e){e.remove(),t()}),f(function(e){e.code===e.NOT_FOUND_ERR?t():c()}))}),c)}),c)):c()},t=o.prototype,r=function(e,t){return new o(e,t)};return t.abort=function(){var e=this;e.readyState=e.DONE,e.savedAs=e.FAILED,N(e,"abort")},t.readyState=t.INIT=0,t.WRITING=1,t.DONE=2,t.FAILED=-1,t.SAVEDASBLOB=1,t.SAVEDASURI=2,t.SAVEDASUNKNOWN=3,t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null,w.addEventListener("unload",e,!1),r.unload=function(){e(),w.removeEventListener("unload",e,!1)},r}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd?define([],function(){return saveAs}):"undefined"!=typeof Meteor&&(Meteor.saveAs=saveAs);